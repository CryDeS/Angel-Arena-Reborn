"item_potion_immune"
{       
	// General
	//-------------------------------------------------------------------------------------------------------------
    "BaseClass"						"item_datadriven"
	"ID"							"1160"
    "AbilityBehavior"               "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
	
	"AbilityUnitTargetTeam"			"DOTA_UNIT_TARGET_TEAM_FRIENDLY"
	"AbilityUnitTargetType"			"DOTA_UNIT_TARGET_HERO"
	"AbilitySharedCooldown"			"items_magic_immune"
	"AbilityTextureName"	        "potion_immune"


	// Stats
	//-------------------------------------------------------------------------------------------------------------
	"AbilityCastPoint"				"0.0"
	"AbilityCooldown"				"50.0"
	
	// Item Info
	//-------------------------------------------------------------------------------------------------------------
	"ItemCost"						"225"
	"ItemStackable"					"1"
	"ItemPermanent"					"0"
	"ItemInitialCharges"			"1"
	"ItemKillable"                  "1"
	"ItemSellable"                  "1"
	"ItemDroppable"                 "1"
	"ItemPurchasable"				"1"
	
	"precache"
    {
        "soundfile"         "soundevents/game_sounds_heroes/game_sounds_life_stealer.vsndevts"
        "particle"          "particles/units/heroes/hero_life_stealer/life_stealer_rage.vpcf"
        "particle"          "particles/status_fx/status_effect_life_stealer_rage.vpcf"
    }
	
	"AbilitySpecial"
	{
		"01"
		{
			"var_type"				"FIELD_FLOAT"
			"duration"				"3.5"
		}
	}
	
	"OnSpellStart"
	{
		"ApplyModifier"
		{
			"ModifierName"	"modifier_potion_spell_immune"
			"Target" 
			{
				"Center"	"CASTER"
				"Flags" 	"DOTA_UNIT_TARGET_FLAG_NONE | DOTA_UNIT_TARGET_FLAG_OUT_OF_WORLD | DOTA_UNIT_TARGET_FLAG_INVULNERABLE"
			}
			"Duration"		"%duration"
		}
        "SpendCharge"
		{
		}        
	}
	
	"Modifiers"
	{
		"modifier_potion_spell_immune"
		{
			"Passive"	"0"
			"IsHidden"	"0"
			"IsPurgable"	"1"
			
			"TextureName"	"custom/potion_immune"
			
			"StatusEffectName"      	"particles/status_fx/status_effect_life_stealer_rage.vpcf"        
            "StatusEffectPriority"  	"10"
    
            "OnCreated"
            {
                "AttachEffect"
                {
                    "EffectName"        "particles/units/heroes/hero_life_stealer/life_stealer_rage.vpcf"
                    "EffectAttachType"  "attach_hitloc"
                    "Target"            "CASTER"
					
                    "ControlPointEntities"
                    {
                        "CASTER"    "attach_hitloc"
                        "CASTER"    "attach_hitloc"
                        "CASTER"    "attach_hitloc"
                    }
                }
            }
			
			"States"
			{
				"MODIFIER_STATE_MAGIC_IMMUNE"	"MODIFIER_STATE_VALUE_ENABLED"
			}
		}
		
	}
}